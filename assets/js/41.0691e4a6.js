(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{514:function(s,a,t){"use strict";t.r(a);var e=t(21),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"extract-dockerfile-by-dockerimage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#extract-dockerfile-by-dockerimage"}},[s._v("#")]),s._v(" Extract Dockerfile By DockerImage")]),s._v(" "),t("blockquote",[t("ul",[t("li",[s._v("때때로 이미지는 있으나, Dockerfile이 없어서 어떤 동작을 하는지 어떤 Base 로 제작되었는지를 모를때 사용하면 좋을 방법을 소개.")]),s._v(" "),t("li",[s._v("여러 가지 방법이 있었는데 해당 방법이 제일 좋았던 느낌.")])])]),s._v(" "),t("h1",{attrs:{id:"setting"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setting"}},[s._v("#")]),s._v(" Setting")]),s._v(" "),t("p",[s._v(".bashrc와 같은 곳에 등록 해서 사용.")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("dfimage")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("target")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images -q $target"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$id")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -v /var/run/docker.sock:/var/run/docker.sock --rm laniksj/dfimage "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$id")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h1",{attrs:{id:"사용"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#사용"}},[s._v("#")]),s._v(" 사용")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("  dfimage image이름\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h1",{attrs:{id:"summary-how-does-it-work"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#summary-how-does-it-work"}},[s._v("#")]),s._v(" Summary: How Does It Work?")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images --tree\nWarning: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'--tree'")]),s._v(" is deprecated, it will be removed soon. See usage.\n└─511136ea3c5a Virtual Size: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" B Tags: scratch:latest\n  └─1e8abad02296 Virtual Size: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("121.8")]),s._v(" MB\n    └─f106b5d7508a Virtual Size: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("121.8")]),s._v(" MB\n      └─0ae4b97648db Virtual Size: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("690.2")]),s._v(" MB\n        └─a2df34bb17f4 Virtual Size: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("808.3")]),s._v(" MB Tags: buildpack-deps:latest\n          └─86258af941f7 Virtual Size: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("808.6")]),s._v(" MB\n            └─1dc22fbdefef Virtual Size: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("846.7")]),s._v(" MB\n              └─00227c86ea87 Virtual Size: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("863.7")]),s._v(" MB\n                └─564e6df9f1e2 Virtual Size: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.009")]),s._v(" GB\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" inspect 011aa33ba92b\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ContainerConfig"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Cmd"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"#(nop) ONBUILD RUN [ ! -e Gemfile ] || bundle install --system"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("p",[t("code",[s._v("docker image --tree")]),s._v("와 docker inspect를 이용 하여 각 레이어를 확인하여  사용자가 보기 편한 상태의 Dockerfile을 만들어 주도록 "),t("code",[s._v("lanikSJ/dfimage")]),s._v("통해 제공 해주고 있습니다.")]),s._v(" "),t("h1",{attrs:{id:"유의사항"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#유의사항"}},[s._v("#")]),s._v(" 유의사항")]),s._v(" "),t("ul",[t("li",[s._v("실제 Dockerfile을 꺼내는 것이 아닌, tree를 통한 유추되는 형태로 만들어 지는 것이므로 완벽한 "),t("code",[s._v("Dockerfile")]),s._v("은 아닙니다.")]),s._v(" "),t("li",[s._v("COPY의 경우 COPY되는 파일명을 정확히 모를 수 있습니다.")])]),s._v(" "),t("blockquote",[t("p",[s._v("ps. 자세한 설명은 아래 "),t("code",[s._v("참고 사이트")]),s._v("에 잘 설명 되어있습니다.")])]),s._v(" "),t("h1",{attrs:{id:"참고사이트"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#참고사이트"}},[s._v("#")]),s._v(" 참고사이트")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/LanikSJ/dfimage",target:"_blank",rel:"noopener noreferrer"}},[s._v("LanikSJ/dfimage"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);