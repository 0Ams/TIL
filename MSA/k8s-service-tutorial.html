<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>k8s Service Tutorial | Today Eddie Learned</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/TIL/10ms_logo.png">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-1SM39X20B1"></script>
    <script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-1SM39X20B1');</script>
    <meta name="description" content="Eddie&#39;s Personal Wiki (Today I Learned)">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.dc919744.css" as="style"><link rel="preload" href="/TIL/assets/js/app.677ead70.js" as="script"><link rel="preload" href="/TIL/assets/js/4.2b83ac88.js" as="script"><link rel="preload" href="/TIL/assets/js/6.f5c84fc7.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.10ca4886.js"><link rel="prefetch" href="/TIL/assets/js/11.24cc14e9.js"><link rel="prefetch" href="/TIL/assets/js/12.9af9b282.js"><link rel="prefetch" href="/TIL/assets/js/13.02273081.js"><link rel="prefetch" href="/TIL/assets/js/14.ce107445.js"><link rel="prefetch" href="/TIL/assets/js/15.1b680dc9.js"><link rel="prefetch" href="/TIL/assets/js/16.c5e83920.js"><link rel="prefetch" href="/TIL/assets/js/17.5264d8c7.js"><link rel="prefetch" href="/TIL/assets/js/18.a7e4a09b.js"><link rel="prefetch" href="/TIL/assets/js/19.fd4b7820.js"><link rel="prefetch" href="/TIL/assets/js/20.0e64144e.js"><link rel="prefetch" href="/TIL/assets/js/21.48edc50b.js"><link rel="prefetch" href="/TIL/assets/js/22.f4fd439b.js"><link rel="prefetch" href="/TIL/assets/js/23.a687a434.js"><link rel="prefetch" href="/TIL/assets/js/24.eaf3d960.js"><link rel="prefetch" href="/TIL/assets/js/25.996771ad.js"><link rel="prefetch" href="/TIL/assets/js/26.47ee4ede.js"><link rel="prefetch" href="/TIL/assets/js/27.14db8e7b.js"><link rel="prefetch" href="/TIL/assets/js/28.18478ac8.js"><link rel="prefetch" href="/TIL/assets/js/29.2f7deb8e.js"><link rel="prefetch" href="/TIL/assets/js/30.22f68b3e.js"><link rel="prefetch" href="/TIL/assets/js/31.801e0957.js"><link rel="prefetch" href="/TIL/assets/js/32.9fad7200.js"><link rel="prefetch" href="/TIL/assets/js/33.b73d45f4.js"><link rel="prefetch" href="/TIL/assets/js/34.80bd1162.js"><link rel="prefetch" href="/TIL/assets/js/35.f8d42295.js"><link rel="prefetch" href="/TIL/assets/js/36.ef5029eb.js"><link rel="prefetch" href="/TIL/assets/js/37.3016ae49.js"><link rel="prefetch" href="/TIL/assets/js/38.de68fba6.js"><link rel="prefetch" href="/TIL/assets/js/39.d8a34d59.js"><link rel="prefetch" href="/TIL/assets/js/40.c219aa35.js"><link rel="prefetch" href="/TIL/assets/js/41.0691e4a6.js"><link rel="prefetch" href="/TIL/assets/js/42.9e3fafda.js"><link rel="prefetch" href="/TIL/assets/js/43.a3c053c7.js"><link rel="prefetch" href="/TIL/assets/js/44.4c6b276c.js"><link rel="prefetch" href="/TIL/assets/js/45.fee10dbb.js"><link rel="prefetch" href="/TIL/assets/js/46.1bbb77fa.js"><link rel="prefetch" href="/TIL/assets/js/47.f924304d.js"><link rel="prefetch" href="/TIL/assets/js/5.645d5d3e.js"><link rel="prefetch" href="/TIL/assets/js/7.3e3bd117.js"><link rel="prefetch" href="/TIL/assets/js/8.ebc6139d.js"><link rel="prefetch" href="/TIL/assets/js/9.542091d3.js"><link rel="prefetch" href="/TIL/assets/js/vendors~mermaid.972a5aa3.js"><link rel="prefetch" href="/TIL/assets/js/vendors~reveal.a0c765d5.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.dc919744.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">Today Eddie Learned</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/0ams/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://mysetting.io/u/0Ams" target="_blank" rel="noopener noreferrer" class="nav-link external">
  mysetting
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/0ams/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://mysetting.io/u/0Ams" target="_blank" rel="noopener noreferrer" class="nav-link external">
  mysetting
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ETC</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>General</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>MSA</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/MSA/2019-09-15-kubernetes-words.html" class="sidebar-link">kubernetes words</a></li><li><a href="/TIL/MSA/2021-02-08-gRPC-with-nodejs.html" class="sidebar-link">gRPC with nodejs</a></li><li><a href="/TIL/MSA/grpc&amp;istio.html" class="sidebar-link">grpc and istio 훑어보기</a></li><li><a href="/TIL/MSA/k8s-service-tutorial.html" aria-current="page" class="active sidebar-link">k8s Service Tutorial</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/MSA/k8s-service-tutorial.html#service-clusterip-만들기" class="sidebar-link">Service(ClusterIP) 만들기</a></li><li class="sidebar-sub-header"><a href="/TIL/MSA/k8s-service-tutorial.html#service-생성-flow" class="sidebar-link">Service 생성 Flow</a></li><li class="sidebar-sub-header"><a href="/TIL/MSA/k8s-service-tutorial.html#service-nodeport-만들기" class="sidebar-link">Service(NodePort) 만들기</a></li><li class="sidebar-sub-header"><a href="/TIL/MSA/k8s-service-tutorial.html#service-loadbalancer-만들기" class="sidebar-link">Service(LoadBalancer) 만들기</a></li><li class="sidebar-sub-header"><a href="/TIL/MSA/k8s-service-tutorial.html#마무리" class="sidebar-link">마무리</a></li><li class="sidebar-sub-header"><a href="/TIL/MSA/k8s-service-tutorial.html#참고" class="sidebar-link">참고</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PT</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Platform</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Theory</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vscode</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="k8s-service들에-대한-이야기"><a href="#k8s-service들에-대한-이야기" class="header-anchor">#</a> k8s Service들에 대한 이야기</h1> <ul><li>k8s svc에 대한 정의와 어디에 사용 하는지에 대한 설명을 적어봅니다.</li></ul> <h1 id="service"><a href="#service" class="header-anchor">#</a> Service</h1> <blockquote><p>Pod은 자체 IP를 가지고 다른 Pod과 통신할 수 있지만, 쉽게 사라지고 생성되는 특징 때문에 직접 통신하는 방법은 권장하지 않고 있다.
k8s는 Pod과 직접 통신하는 방법 대신, 별도의 고정된 IP를 가진 서비스를 만들고 그 서비스를 통해 Pod에 접근하는 방식을 사용 하고 있다.
그걸 할 수 있도록 도와 주는게 Service이다</p></blockquote> <p><img src="/TIL/assets/img/2022-06-13-20-33-35.2a8ffa2b.png" alt="" loading="lazy"></p> <p>이런 개념은 처음 접하였을때 어려웠다!
개념도 생소하고 노출 범위에 따라 <code>CluterIP</code>, <code>NodePort</code>, <code>LoadBalancer</code> 으로 나누어져 더욱 어렵게 되어있었다.</p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>서비스 종류 중에 <code>ExternalName</code>도 있지만 여기서는 다루지 않았다. 중요 3총사만 확인하고 남겨본다.</p></div> <h2 id="service-clusterip-만들기"><a href="#service-clusterip-만들기" class="header-anchor">#</a> Service(ClusterIP) 만들기</h2> <p>ClusterIP는 클러스터 내부에 새로운 IP를 할당하고, 여러 개의 Pod을 바라보는 로드밸런서 기능을 제공한다.
그리고 서비스 이름을 내부 도메인 서버에 등록하여 Pod 간에 서비스 이름으로 통신할 수 있다.</p> <p>Backend DB 중에 redis를 통해 예제를 만들어보았다.</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> redis
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> test
      <span class="token key atrule">tier</span><span class="token punctuation">:</span> db
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> test
        <span class="token key atrule">tier</span><span class="token punctuation">:</span> db
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> redis
          <span class="token key atrule">image</span><span class="token punctuation">:</span> redis
          <span class="token key atrule">ports</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">6379</span>
              <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> redis
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> test
    <span class="token key atrule">tier</span><span class="token punctuation">:</span> db
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>redis를 먼저 실행 해서 만들어보자.</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ kubectl apply -f test-redis-svc.yml

<span class="token comment"># Pod, ReplicaSet, Deployment, Service 상태 확인</span>
$ kubectl get all
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><em>실행 결과</em></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>NAME                         READY   STATUS    RESTARTS   AGE
pod/redis-67d485db42-mf5w5   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          24s

NAME                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>    AGE
service/kubernetes   ClusterIP   <span class="token number">10.76</span>.0.1       <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">443</span>/TCP    19h
service/redis        ClusterIP   <span class="token number">10.103</span>.50.52   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">6379</span>/TCP   24s

NAME                    READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/redis   <span class="token number">1</span>/1     <span class="token number">1</span>            <span class="token number">1</span>           24s

NAME                               DESIRED   CURRENT   READY   AGE
replicaset.apps/redis-67d485db42   <span class="token number">1</span>         <span class="token number">1</span>         <span class="token number">1</span>       24s
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>redis Deployment와 Service가 생성된 것을 볼 수 있다.</p> <p><img src="/TIL/assets/img/2022-06-13-20-33-59.ad17803f.png" alt="" loading="lazy"></p> <p>같은 클러스터에서 생성된 Pod이라면 <code>redis</code>라는 도메인으로 redis Pod에 접근 할 수 있다. (<code>redis.default.svc.cluster.local</code>로도 접근가능 하다. 서로 다른 namespace와 cluster를 구분할 수 있다.)</p> <p>CluterIP 서비스의 설정을 살펴보자.</p> <table><thead><tr><th>Define</th> <th>Description</th></tr></thead> <tbody><tr><td><code>spec.ports.port</code></td> <td>서비스가 생성할 Port</td></tr> <tr><td><code>spec.ports.targetPort</code></td> <td>서비스가 접근할 Pod의 Port (기본: port랑 동일)</td></tr> <tr><td><code>spec.selector</code></td> <td>서비스가 접근할 Pod의 label 조건</td></tr></tbody></table> <p><code>redis Service</code>의 <code>selector</code>는 redis Deployment에 정의한 label을 사용했기 때문에 해당 Pod을 가리킨다.
그리고 해당 Pod을 6379 포트로 연결하였다.</p> <p>이제 redis에 접근할 test 앱을 deployment로 만든다.</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> test
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> test
      <span class="token key atrule">tier</span><span class="token punctuation">:</span> app
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> test
        <span class="token key atrule">tier</span><span class="token punctuation">:</span> app
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> test
          <span class="token key atrule">image</span><span class="token punctuation">:</span> ghcr.io/subicura/test<span class="token punctuation">:</span>latest
          <span class="token key atrule">env</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> REDIS_HOST
              <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'redis'</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> REDIS_PORT
              <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'6379'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>test app Pod에서 redis Pod으로 접근이 되는지 테스트 해보자.</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ kubectl apply -f test-app.yml

<span class="token comment"># test app에 접근</span>
$ kubectl get po
$ kubectl <span class="token builtin class-name">exec</span> -it <span class="token variable"><span class="token variable">$(</span>k get po -lapp<span class="token operator">=</span>test --output<span class="token operator">=</span>jsonpath<span class="token operator">=</span><span class="token punctuation">{</span>.items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>.metadata.name<span class="token punctuation">}</span><span class="token variable">)</span></span> -- <span class="token function">sh</span>

<span class="token comment"># curl localhost:3000 또는 telnet redis 6379</span>
<span class="token operator">&gt;</span>  dbsize
<span class="token operator">&gt;</span>  KEYS *
<span class="token operator">&gt;</span>  GET count
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Service를 통해 Pod과 성공적으로 연결할 수 있다.</p> <h2 id="service-생성-flow"><a href="#service-생성-flow" class="header-anchor">#</a> Service 생성 Flow</h2> <blockquote><p>Service는 각 Pod를 바라보는 로드밸런서 역할을 하면서 내부 도메인서버에 새로운 도메인을 생성한다.
Service가 어떻게 동작하는지 살펴보자.</p></blockquote> <div data-code="sequenceDiagram%0A%20%20autonumber%0A%20%20participant%20A%20as%20API%20Server%0A%20%20participant%20E%20as%20Endpoint%3Cbr%20%2F%3EController%0A%20%20participant%20P%20as%20Kube-Proxy%0A%20%20participant%20D%20as%20CoreDNS%0A%20%20Note%20left%20of%20A%3A%20service.yml%0A%0A%20%20loop%0A%20%20%20%20E-%3E%3EA%3A%20Service%20%EA%B0%90%EC%8B%9C%0A%20%20%20%20E-%3E%3EA%3A%20Endpoint%20%EC%83%9D%EC%84%B1%0A%20%20end%0A%0A%20%20loop%0A%20%20%20%20P-%3E%3EA%3A%20Endpoint%20%EA%B0%90%EC%8B%9C%0A%20%20end%0A%0A%20%20Note%20right%20of%20P%3A%20Endpoint%20%EB%B3%80%EA%B2%BD%EC%8B%9C%3Cbr%20%2F%3Eiptables%20%EC%84%A4%EC%A0%95%0A%0A%20%20loop%0A%20%20%20%20D-%3E%3EA%3A%20Service%20%EA%B0%90%EC%8B%9C%0A%20%20end%0A%0A%20%20Note%20right%20of%20D%3A%20Service%20%EB%B3%80%EA%B2%BD%EC%8B%9C%3Cbr%20%2F%3ECoreDNS%20%EC%84%A4%EC%A0%95%0A" class="md-mermaid-loading"><svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" style="background:0 0;display:block;shape-rendering:auto;"><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" stroke-width="2"><animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="0s"></animate> <animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="0s"></animate></circle> <circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" stroke-width="2"><animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-0.3333333333333333s"></animate> <animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-0.3333333333333333s"></animate></circle> <circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" stroke-width="2"><animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-0.6666666666666666s"></animate> <animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-0.6666666666666666s"></animate></circle></svg></div><ol><li><code>Endpoint Controller</code>는 <code>Service</code>와 <code>Pod</code>을 감시하면서 조건에 맞는 Pod의 IP를 수집</li> <li><code>Endpoint Controller</code>가 수집한 IP를 가지고 <code>Endpoint</code> 생성</li> <li><code>Kube-Proxy</code>는 <code>Endpoint</code> 변화를 감시하고 노드의 iptables을 설정</li> <li><code>CoreDNS</code>는 <code>Service</code>를 감시하고 서비스 이름과 IP를 <code>CoreDNS</code>에 추가</li></ol> <p><code>iptables</code>는 커널<sup>kernel</sup> 레벨의 네트워크 도구이고 <code>CoreDNS</code>는 빠르고 편리하게 사용할 수 있는 클러스터 내부용 도메인 네임 서버이다. 각각의 역할은 <code>iptables</code> 설정으로 여러 IP에 트래픽을 전달하고 <code>CoreDNS</code>를 이용하여 IP 대신 도메인 이름을 사용한다.</p> <div class="custom-block tip"><p class="custom-block-title">Tips</p> <p>iptables는 규칙이 많아지면 성능이 느려지는 이슈가 있어, <code>ipvs</code>를 사용하는 옵션도 있다.</p></div> <div class="custom-block tip"><p class="custom-block-title">Tips</p> <p>CoreDNS는 클러스터에서 호환성을 위해 <code>kube-dns</code>라는 이름으로 생성된다.</p></div> <p>갑자기 Endpoint가 나왔다. Endpoint는 서비스의 접속 정보를 가지고 있다.</p> <p>Endpoint의 상태를 살펴보면 아래와 같이 볼 수 있다.</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ kubectl get endpoints
$ kubectl get ep <span class="token comment">#줄여서</span>

<span class="token comment"># redis Endpoint 확인</span>
$ kubectl describe ep/redis
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><em>실행 결과</em></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Name:         redis
Namespace:    default
Labels:       <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
Annotations:  endpoints.kubernetes.io/last-change-trigger-time: <span class="token punctuation">..</span>.
Subsets:
  Addresses:          <span class="token number">172.17</span>.0.2
  NotReadyAddresses:  <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
  Ports:
    Name     Port  Protocol
    ----     ----  --------
    <span class="token operator">&lt;</span>unset<span class="token operator">&gt;</span>  <span class="token number">6379</span>  TCP
Events:  <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Endpoint Addresses 정보에 Redis Pod의 IP가 보이게 된다. (Replicas가 여러개였다면 여러 IP가 보인다.)</p> <h2 id="service-nodeport-만들기"><a href="#service-nodeport-만들기" class="header-anchor">#</a> Service(NodePort) 만들기</h2> <p><code>CluterIP</code>는 클러스터 내부에서만 접근할 수 있다.
클러스터 외부(노드)에서 접근할 수 있도록 <code>NodePort</code> 서비스를 만들어보자.</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> test<span class="token punctuation">-</span>np
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">3000</span>
      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
      <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">31001</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> test
    <span class="token key atrule">tier</span><span class="token punctuation">:</span> app
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><table><thead><tr><th>Define</th> <th>Description</th></tr></thead> <tbody><tr><td><code>spec.ports.nodePort</code></td> <td>Node에 오픈할 Port (미지정시 30000-32768 중에 자동 할당됨)</td></tr></tbody></table> <p><code>test app</code>을 해당 노드의 31001으로 오픈하였다.</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ kubectl apply -f test-nodeport.yml

<span class="token comment"># 서비스 상태 확인</span>
$ kubectl get svc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><em>실행 결과</em></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>NAME         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>          AGE
test-np   NodePort    <span class="token number">10.101</span>.168.120   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">3000</span>:31001/TCP   54s
kubernetes   ClusterIP   <span class="token number">10.76</span>.0.1        <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">443</span>/TCP          19h
redis        ClusterIP   <span class="token number">10.103</span>.50.52    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">6379</span>/TCP         40m
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>minikube ip</code>로 테스트 클러스터의 노드 IP를 구하고 31001으로 접근해보자.</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ <span class="token function">curl</span> <span class="token number">192.168</span>.64.4:31001
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Docker driver를 사용중이라면 <code>minikube service test-np</code> 명령어를 이용하여 접속하면 된다.</p></div> <p><img src="/TIL/assets/img/2022-06-13-20-36-14.2d46f918.png" alt="" loading="lazy"></p> <p><code>NodePort</code>는 클러스터의 모든 노드에 포트를 오픈하여 접근 할 수 있도록 한다.
지금은 하나의 노드밖에 없지만 여러 개의 노드가 있다면 아무 노드로 접근해도 지정한 Pod으로 쏘옥 접근할 수 있다.</p> <p><img src="/TIL/assets/img/2022-06-13-20-36-28.ca07cf2a.png" alt="" loading="lazy"></p> <div class="custom-block tip"><p class="custom-block-title">Tips</p> <p>NodePort는 CluterIP의 기능을 기본으로 포함한다.</p></div> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Type=NodePort인 서비스로 보내진 패킷은 소스 NAT가 기본으로 적용된다. 그래서 명심할 것은 <code>NodePort</code>로 들어온 요청은 정확한 클라이언트 IP 주소가 아니고, 클러스터 내부 IP 주소가 될 수 있다.
시각적으로 <img src="/TIL/assets/img/2022-06-13-21-13-10.949d3778.png" alt="" loading="lazy"></p> <p>이를 피하기 위해 <code>externalTrafficPolicy: Local</code>옵션을 사용 해야함을 잊지 말자.</p></div> <h2 id="service-loadbalancer-만들기"><a href="#service-loadbalancer-만들기" class="header-anchor">#</a> Service(LoadBalancer) 만들기</h2> <p>NodePort의 단점은 노드가 사라졌을 때 자동으로 다른 노드를 통해 접근이 불가능하다는 점이다.
예를 들어, 3개의 노드가 있다면 3개 중에 아무 노드로 접근해도 <code>NodePort</code>로 연결할 수 있지만 어떤 노드가 살아 있는지는 알 수는 없다.</p> <p><img src="/TIL/assets/img/2022-06-13-20-36-54.bc811502.png" alt="" loading="lazy"></p> <p>자동으로 살아 있는 노드에 접근하기 위해 모든 노드를 바라보는 <code>Load Balancer</code>가 필요하다.
Client는 NodePort에 직접 요청을 보내는 것이 아니라 <code>Load Balancer</code>에 요청하고 Load Balancer가 알아서 살아 있는 노드에 접근하면 NodePort의 단점을 없앨 수 있다.</p> <p>Load Balancer를 생성해 보자.</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> test<span class="token punctuation">-</span>lb
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> LoadBalancer
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">30000</span>
      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">3000</span>
      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> test
    <span class="token key atrule">tier</span><span class="token punctuation">:</span> app
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ kubectl apply -f test-lb.yml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><em>실행 결과</em></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>NAME         TYPE           CLUSTER-IP       EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>           AGE
test-lb   LoadBalancer   <span class="token number">10.109</span>.50.21   <span class="token operator">&lt;</span>pending<span class="token operator">&gt;</span>     <span class="token number">30000</span>:31535/TCP   50s
test-np   NodePort       <span class="token number">10.101</span>.168.120   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">3000</span>:31001/TCP    54m
kubernetes   ClusterIP      <span class="token number">10.76</span>.0.1        <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">443</span>/TCP           20h
redis        ClusterIP      <span class="token number">10.103</span>.50.52    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">6379</span>/TCP          60m
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>test-lb가 생성되었지만, <code>EXTERNAL-IP</code>가 <code>&lt;pending&gt;</code>인 것을 확인할 수 있다.
하지만 <code>Load Balancer</code>는 <code>AWS</code>, <code>Google Cloud</code>, <code>Azure</code> 같은 클라우드 환경이 아니면 사용이 제한적일 수 있다.
특정 서버(Node)를 가리키는 무언가(Load Balancer)가 필요한데 이런 <code>무언가</code>가 가상머신이나 로컬 서버에는 존재하지 않기 때문이다.</p> <h3 id="minikube에-가상-loadbalancer-만들기"><a href="#minikube에-가상-loadbalancer-만들기" class="header-anchor">#</a> minikube에 가상 LoadBalancer 만들기</h3> <p>Load Balancer를 사용할 수 없는 환경에서 가상 환경을 만들어 주는 것이 <code>MetalLB</code>라는 것이다. minikube에서는 현재 떠 있는 노드를 Load Balancer로 설정한다. minikube의 <code>addons</code> 명령어로 활성화할 수 있다.</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>minikube addons <span class="token builtin class-name">enable</span> metallb
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>그리고 <code>minikube ip</code>명령어로 확인한 IP를 ConfigMap으로 지정해야 한다.</p> <p>minikube를 이용하여 손쉽게 metallb 설정을 할 수 있다.</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>minikube addons configure metallb

-- Enter Load Balancer Start IP: <span class="token comment"># minikube ip 결과값 입력</span>
-- Enter Load Balancer End IP: <span class="token comment"># minikube ip 결과값 입력</span>
    ▪ Using image metallb/speaker:latest
    ▪ Using image metallb/controller:latest
✅  metallb was successfully configured
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>minikube를 사용하지 않고 직접 ConfigMap을 작성할 수도 있다.</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ConfigMap
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> metallb<span class="token punctuation">-</span>system
  <span class="token key atrule">name</span><span class="token punctuation">:</span> config
<span class="token key atrule">data</span><span class="token punctuation">:</span>
  <span class="token key atrule">config</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    address-pools:
    - name: default
      protocol: layer2
      addresses:
      - 192.168.64.4/32 # minikube ip</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ kubectl apply -f metallb-cm.yml

<span class="token comment"># 다시 서비스 확인</span>
$ kubectl get svc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><em>실행 결과</em></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>NAME         TYPE           CLUSTER-IP       EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>           AGE
test-lb   LoadBalancer   <span class="token number">10.109</span>.50.21   <span class="token number">192.168</span>.64.4  <span class="token number">30000</span>:31535/TCP   10m
test-np   NodePort       <span class="token number">10.101</span>.168.120   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">3000</span>:31001/TCP    34m
kubernetes   ClusterIP      <span class="token number">10.76</span>.0.1        <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">443</span>/TCP           21h
redis        ClusterIP      <span class="token number">10.103</span>.50.52    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">6379</span>/TCP          60m
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>이제 <code>192.168.64.4:30000</code>으로 접근해면</p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Docker driver를 사용중이라면 <code>minikube service test-lb</code> 명령어를 이용하여 접속하면 된다.</p></div> <div class="custom-block tip"><p class="custom-block-title">Tips</p> <p>LoadBalancer는 NodePort의 기능을 기본으로 포함된다.</p></div> <h2 id="마무리"><a href="#마무리" class="header-anchor">#</a> 마무리</h2> <p><code>k8s 서비스</code>는 low level 수준의 네트워크를 이해하고 성능, 보안 이슈를 신경 써야 한다.
파고들면 한없이 복잡하고 어려운 부분이 많아서 일단 그렇구나.. 하고 넘어가는게 맘이 편하였다...</p> <p>실전에선 NodePort와 LoadBalancer를 제한적으로 사용한다.
보통 웹 애플리케이션을 배포하면 80 또는 443 포트를 사용하고 하나의 포트에서 여러 개의 서비스를 도메인이나 경로에 따라 다르게 연결하기 때문이다.</p> <h2 id="참고"><a href="#참고" class="header-anchor">#</a> 참고</h2> <ul><li><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.24/#service-v1-core" target="_blank" rel="noopener noreferrer">Service v1 core<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.edureka.co/blog/kubernetes-networking" target="_blank" rel="noopener noreferrer">k8s 네트워크<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/7/2022, 1:57:59 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL/MSA/grpc&amp;istio.html" class="prev">
        grpc and istio 훑어보기
      </a></span> <span class="next"><a href="/TIL/PT/demo.html">
        Demo
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/TIL/assets/js/app.677ead70.js" defer></script><script src="/TIL/assets/js/4.2b83ac88.js" defer></script><script src="/TIL/assets/js/6.f5c84fc7.js" defer></script>
  </body>
</html>
